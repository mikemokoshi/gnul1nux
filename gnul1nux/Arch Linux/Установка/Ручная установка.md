
[[#Разметка диска]]
[[#Форматируем диски]]
[[#Монтируем диски]]
[[#Установка базовой системы]]

---
## Разметка диска

Первым делом проверяем какие диски подключены в системе

```shell
lsblk
```

Для разметки диска используем утилиту `cfdisk`

```bash
# Вы вместо nvme01n1 прописываете свой диск
cfdisk /dev/nvme01n1
```

Диски размечаем как вам удобно, я буду придерживаться своей версии. На моем диске `476GB` свободного места

| Место | Категория  |
| ----- | ---------- |
| 1G    | EFI раздел |
| 60G   | /          |
| 415G  | /home      |

**EFI (1G)**

Выбираем `free space -> New`
Указываем размер `1G`
Установить тип раздела `Type -> EFI System`

**Root(/)**

Выбираем `free space -> New`
Указываем размер `60G`
Тип раздела по умолчанию `Type -> Linux filesystem`

**Home(/home)**

Выбираем `free space -> New`
Указываем размер `415G`
Тип раздела по умолчанию `Type -> Linux filesystem`

**Cохраняем изменения**

Выбираем `Write -> вводим yes`
Выходим `Quit`

**Проверяем разметку**

```bash
lsblk -f
```

---

## Форматируем диски

Разгрузочный раздел **EFI**

```bash
mkfs.fat -F32 /dev/nvme0n1p1
```

Root раздел **(/)**

```bash
mkfs.ext4 /dev/nvme0n1p2 # Я выбрал ex4, есть и другие варианты btrfs и тд.
```

Домашний раздел **(/home)**

```bash
mkfs.ext4 /dev/nvme0n1p3
```

У нас должно получиться следующее:


| Диск        | Формат | Раздел     |
| ----------- | ------ | ---------- |
| `nvme0n1p1` | vfat   | EFI раздел |
| `nvme0n1p2` | ext4   | root (/)   |
| `nvme0n1p3` | ext4   | (/home)    |

---
## Монтируем диски

```bash
# Root (/) монитруем в /mnt
mount /dev/nvme0n1p2 /mnt
```

Для **EFI** создаем папку

```bash
mkdir -p /mnt/boot
```

```bash
# Далее монтируем EFI
mount /dev/nvme0n1p1 /mnt/boot
```

Создаем папку для домашней директории

```bash
mkdir -p /mnt/home
```

```bash
# Монтируем домашний раздел
mount /dev/nvme0n1p3 /mnt/home
```

**Проверяем**

```bash
lsblk

# nvme0n1p1 /mnt/boot
# nvme0n1p2 /mnt
# nvme0n1p3 /mnt/home
```

---
## Установка базовой системы

Используем скрипт `pacstrap` для установки базовой системы. Далее я перечисляю пакеты которые использовал, вы можете что-то убрать или добавить свое, главное не удаляйте **обязательные пакеты**.

```bash
pacstrap -K /mnt base sudo linux linux-firmware linux-headers nano vim grub efibootmgr hyprland xorg-xwayland waybar wofi kitty nvidia nvidia-utils nvidia-settings pipewire pipewire-pulse wireplumber networkmanager bluez firefox fuse htop hyprpaper noto-fonts ttf-dejavu ttf-font-awesome ttf-jetbrains-mono
```

**После установки** 

Генерируем файл `fstab`

```bash
genfstab /mnt
```

Перенаправляем

```bash
genfstab /mnt >> /mnt/etc/fstab
```

---
### Переходим в chroot-окружение

```bash
arch-chroot /mnt
```

**Включаем службы**

```bash
systemctl enable NetworkManager
```

Если вы ставили пакет менеджер входа например `(sddm)`, я же использую `tty`

```bash
systemctl enable sddm
```

**Создаем своего пользователя**

```bash
useradd -m "nickname"
passwd "nickname"
# Вводим пароль дважды
```

Задаем пароль для root

```bash
passwd root
# Вводим пароль дважды
```

Сразу даем себе право использовать `sudo`

```bash
nano /etc/sudoers
# Находим и добавляем свой username
# root ALL=(ALL:ALL) ALL
# nickname ALL=(ALL:ALL) ALL
```

**Локализация и язык системы**

```bash
# Переходим
nano /etc/locale.gen

# Расскоментируем нужные локали
en_US.UTF-8 UTF-8
ru_RU.UTF-8 UTF-8
```

**Устанавливаем стандартную стандартный язык системы**

```bash
# Переходим
nano /etc/locale.conf
```

```
# Прописываем
LANG="en_US.UTF-8"
```

Сгенерируем локал

```
locale-gen
```

**Устанавливаем загрузчик**

```bash
grub-install --target=x86_64-efi --efi-directory=/boot --bootloader-id=GRUB
```

Сгенерируем конфиг

```
grub-mkconfig -o /boot/grub/grub.cfg
```

Выходим

```bash
exit
```

Размонитруем разделы 

```bash
unmount -R /mnt
```

Перезагружаемся

```bash
reboot
```

---












